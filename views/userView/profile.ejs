<%- include("../partials/userHeader") %>

<main>
  <!-- User Profile Section -->
  <section class="user-profile-area pt-100 pb-100">
    <div class="container">
      <div class="row">
        <div class="col-xl-3">
          <!-- User Profile Sidebar -->
          <div class="user-profile-sidebar">
            <ul class="user-profile-menu">
              <li><a href="#">Account Details</a></li>
              <li><a href="#">Addresses</a></li>
              <li><a href="#">My Orders</a></li>
              <li><a href="#">Sign Out</a></li>
            </ul>
          </div>
        </div>
        <div class="col-xl-9">
          <!-- User Profile Content -->
          <div class="user-profile-content">
            <h2>Hello <%= loginStatus.username %></h2>
            <p>
              From your account dashboard you can view your recent orders,
              manage your shipping and billing addresses, and edit your password
              and account details.
            </p>

            <!-- Recent Orders -->
<div class="recent-orders">
  <h3>Recent Orders</h3>
  <% if (userOrders.length === 0) { %>
    <table class="order-table">
      <thead>
        <tr>
          <th>Product</th>
          <th>Quantity</th>
          <th>Size</th>
          <th>Order Date</th>
          <th>Payment Method</th>
          <th>Order Status</th>
        </tr>
      </thead>
      <tbody id="order-details">
        <tr>
          <td colspan="6">No new orders yet !!!!!!</td>
        </tr>
      </tbody>
    </table>
  <% } else { %>
    <table class="order-table">
      <thead>
        <tr>
          <th>Product</th>
          <th>Quantity</th>
          <th>Size</th>
          <th>Order Date</th>
          <th>Payment Method</th>
          <th>Order Status</th>
        </tr>
      </thead>
      <tbody id="order-details">
        <% for (let i = 0; i < userOrders.length; i++) { %> 
          <% const order = userOrders[i]; %>
          <tr>
            <td class="product-name">
              <a href="#"><%= order.productName %></a>
            </td>
            <td class="product-quantity"><%= order.quantity %></td>
            <td class="product-size"><%= order.size %></td>
            <td class="order-date"><%= order.orderDate %></td>
            <td class="payment-method"><%= order.paymentMethod %></td>
            <td class="order-status"><%= order.orderStatus %></td>
          </tr>
        <% } %>
      </tbody>
    </table>
  <% } %>
  <!-- Button to navigate to order details -->
  <button style="background-color: red; color: white; padding: 10px 20px; border: none; cursor: pointer;" onclick="window.location.href='/order-details'">To Order Details</button>
</div>


            <!-- Addresses -->
            <div class="addresses">
              <h3>Addresses</h3>
              <% if (userAddress) { %>
              <div class="address">
                <h4>Edit Address</h4>
                <p>First Name: <%= userAddress.firstName %></p>
                <p>Last Name: <%= userAddress.lastName %></p>
                <p>House: <%= userAddress.house %></p>
                <p>Locality: <%= userAddress.locality %></p>
                <p>City: <%= userAddress.city %></p>
                <p>State: <%= userAddress.state %></p>
                <p>Pincode: <%= userAddress.pincode %></p>
                <p>Country: <%= userAddress.country %></p>
                <p>Email: <%= userAddress.email %></p>
                <p>Phone: <%= userAddress.phone %></p>
                <button class="edit-address-btn">Edit Address</button>
              </div>
              <% } else { %>
              <p>No address found</p>
              <% } %>
            </div>

            <!-- Add Address -->
            <div class="add-address">
              <h3>Add Address</h3>
              <form class="address-form" action="/add-address" method="post">
                <!-- Form fields for adding address -->
              </form>
            </div>

            <!-- Change Password -->
            <div class="change-password">
              <h3>Change Password</h3>
              <form class="password-form">
                <!-- Form fields for changing password -->
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

<%- include("../partials/userFooter") %>

<style>
  /* User Profile Page Styles */
  .user-profile-area {
    padding-top: 100px;
    padding-bottom: 100px;
  }

  .user-profile-menu {
    list-style: none;
    padding: 0;
  }

  .user-profile-menu li {
    margin-bottom: 10px;
  }

  .user-profile-menu a {
    text-decoration: none;
    color: #333;
  }

  .user-profile-content h2 {
    margin-bottom: 20px;
  }

  .user-profile-content p {
    margin-bottom: 30px;
  }

  .order-table {
    width: 100%;
    border-collapse: collapse;
  }

  .order-table th,
  .order-table td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
  }

  .order-table th {
    background-color: #f2f2f2;
  }

  .address {
    margin-bottom: 30px;
    padding: 20px;
    border: 1px solid #ddd;
  }

  .address h4 {
    margin-bottom: 10px;
  }

  .address p {
    margin-bottom: 5px;
  }

  .address-form label {
    display: block;
    margin-bottom: 10px;
  }

  .address-form input[type="text"] {
    width: 100%;
    padding: 8px;
    margin-bottom: 10px;
    border: 1px solid #ddd;
  }

  .address-form button {
    padding: 10px 20px;
    background-color: #333;
    color: #fff;
    border: none;
    cursor: pointer;
  }

  .password-form label {
    display: block;
    margin-bottom: 10px;
  }

  .password-form input[type="password"] {
    width: 100%;
    padding: 8px;
    margin-bottom: 10px;
    border: 1px solid #ddd;
  }

  .password-form button {
    padding: 10px 20px;
    background-color: #333;
    color: #fff;
    border: none;
    cursor: pointer;
  }
</style>
