<%- include("../partials/userHeader") %>

<main>
  <!-- breadcrumb-area-start -->
  <section
    class="breadcrumb-area"
    data-background="/user-assets/img/bg/page-title.png"
  >
    <div class="container">
      <div class="row">
        <div class="col-xl-12">
          <div class="breadcrumb-text text-center">
            <h1>Product Page</h1>
            <ul class="breadcrumb-menu">
              <li><a href="/">home</a></li>
              <li><span>Product details</span></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- breadcrumb-area-end -->

  <!-- shop-area start -->
  <section class="shop-details-area pt-100 pb-100">
    <div class="container">
      <div class="row">
        <div class="col-xl-6 col-lg-4">
          <div class="product-details-img mb-10">
            <div class="tab-content" id="myTabContentpro">
              <% for (let i = 0; i < data.productImage.length; i++) { %>
              <div
                class="tab-pane fade <%= i === 0 ? 'show active' : '' %>"
                id="profile<%= i %>"
                role="tabpanel"
              >
                <div
                  class="product-large-img"
                  style="overflow: hidden; position: relative"
                >
                  <img
                    src="/uploads/product-images/<%= data.productImage[i] %>"
                    alt="Product Image"
                    class="zoomable-image"
                    style="transition: transform 0.3s ease"
                    onmouseover="this.style.transform = 'scale(1.2)';"
                    onmouseout="this.style.transform = 'scale(1)';"
                  />
                </div>
              </div>
              <% } %>
            </div>
          </div>

          <div class="shop-thumb-tab mb-30">
            <ul class="nav" id="myTab2" role="tablist">
              <% for (let j = 0; j < data.productImage.length; j++) { %>
              <li class="nav-item">
                <a
                  class="nav-link <%= j === 0 ? 'active' : '' %>"
                  id="home-tab<%= j %>"
                  data-toggle="tab"
                  href="#profile<%= j %>"
                  role="tab"
                  aria-selected="<%= j === 0 ? 'true' : 'false' %>"
                >
                  <img
                    src="/uploads/product-images/<%= data.productImage[j] %>"
                    alt="Thumbnail Image"
                  />
                </a>
              </li>
              <% } %>
            </ul>
          </div>
        </div>

        <div class="col-xl-6 col-lg-8">
          <div class="product-details mb-30 pl-30">
            <!-- <div class="details-cat mb-20">
                                <a href="#">decor,</a>
                                <a href="#">furniture</a>
                            </div> -->
            <h2 class="pro-details-title mb-15"><%= data.productName %></h2>
            <div class="details-price mb-20">
              <span>₹<%= data.salePrice.toFixed(2) %></span>
              <span class="old-price"
                >₹<%= data.regularPrice.toFixed(2) %></span
              >
            </div>
            <div class="product-variant">
              <!-- <div class="product-size variant-item">
                <div class="variant-name">
                  <span>size</span>
                </div>
                <ul class="shop-link shop-size">
                  <li class="active"><a href="/productDetails/:id">L </a></li>
                  <li class="active"><a href="/productDetails/:id">M </a></li>
                  <li class="active"><a href="/productDetails/:id">S </a></li>
                </ul>
              </div> -->

              <div class="product-desc variant-item">
                <%= data.productDescription %>
              </div>

              <div class="product-info-list variant-item">
                <ul>
                  <li><span>Brands:</span>AXOR</li>
                  <li><span>Product Code:</span> d12</li>
                  <li><span>Reward Points:</span> 100</li>
                  <li>
                    <span class="<%= data.totalQuantity === 0 ? 'out-of-stock' : 'in-stock' %>">
        <%= data.totalQuantity === 0 ? 'Out of Stock' : 'In Stock' %>
      </span>
                  </li>
                </ul>
              </div>

              <div class="product-action-details variant-item">
                <div class="product-details-action">
                  <form>
                    <div class="product-size variant-item">
                      <div class="variant-name">
                        <span>size</span>
                      </div>
<ul class="shop-link shop-size">
  <li class="active" onclick="setSize('Large')">
    <button id="buttonL" type="button" class="size-button">L</button>
  </li>
  <li class="active" onclick="setSize('Medium')">
    <button id="buttonM" type="button" class="size-button">M</button>
  </li>
  <li class="active" onclick="setSize('Small')">
    <button id="buttonS" type="button" class="size-button">S</button>
  </li>
</ul>
                    </div>
                    <div class="plus-minus">
                      <div class="cart-plus-minus">
                        <input
                          id="quantityInput"
                          type="text"
                          name="quantity"
                          value="1"
                        />
                      </div>
                    </div>
                    <button class="details-action-icon" type="submit">
                      <i class="fas fa-heart"></i>
                    </button>
                    <div class="details-cart mt-40">
                      <button
                        class="btn theme-btn"
                        type="button"
                        onclick="addToCart('<%= data._id%>')"
                      >
                        Add to Cart
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-50">
        <div class="col-xl-8 col-lg-8">
          <div class="product-review">
            <ul class="nav review-tab" id="myTabproduct" role="tablist">
              <li class="nav-item">
                <a
                  class="nav-link active"
                  id="home-tab6"
                  data-toggle="tab"
                  href="#home6"
                  role="tab"
                  aria-controls="home"
                  aria-selected="true"
                  >Description
                </a>
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  id="profile-tab6"
                  data-toggle="tab"
                  href="#profile6"
                  role="tab"
                  aria-controls="profile"
                  aria-selected="false"
                  >Reviews (2)</a
                >
              </li>
            </ul>
            <div class="tab-content" id="myTabContent2">
              <div
                class="tab-pane fade show active"
                id="home6"
                role="tabpanel"
                aria-labelledby="home-tab6"
              >
                <div class="desc-text">
                  <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                    sed do eiusmod tempor incididunt ut labore et dolore magna
                    aliqua. Ut enim ad minim veniam, quis nostrud exercitation
                    ullamco laboris nisi ut aliquip ex ea commodo consequat.
                    Duis aute irure dolor in reprehenderit in voluptate velit
                    esse cillum dolore eu fugiat nulla pariatur. Excepteur sint
                    occaecat cupidatat non proident, sunt in culpa qui officia
                    deserunt mollit anim id est laborum. Sed ut perspiciatis
                    unde omnis iste natus error sit voluptatem accusantium
                    doloremque laudantium, totam rem aperiam, eaque ipsa quae ab
                    illo inventore veritatis et quasi architecto beatae vitae
                    dicta sunt explicabo.
                  </p>
                  <p>
                    Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut
                    odit aut fugit, sed quia consequuntur magni dolores eos qui
                    ratione voluptatem sequi nesciunt. Neque porro quisquam est,
                    qui dolorem ipsum quia dolor sit amet, consectetur, adipisci
                    velit, sed quia non numquam eius modi tempora incidunt ut
                    labore et dolore magnam aliquam quaerat voluptatem.
                  </p>
                </div>
              </div>
              <div
                class="tab-pane fade"
                id="profile6"
                role="tabpanel"
                aria-labelledby="profile-tab6"
              >
                <div class="desc-text review-text">
                  <div class="product-commnets">
                    <div class="product-commnets-list mb-25 pb-15">
                      <div class="pro-comments-img">
                        <img
                          src="/user-assets/img/product/comments/01.png"
                          alt=""
                        />
                      </div>
                      <div class="pro-commnets-text">
                        <h4>
                          Roger West -
                          <span>June 5, 2018</span>
                        </h4>
                        <div class="pro-rating">
                          <i class="far fa-star"></i>
                          <i class="far fa-star"></i>
                          <i class="far fa-star"></i>
                          <i class="far fa-star"></i>
                        </div>
                        <p>
                          Lorem ipsum dolor sit amet, consectetur adipisicing
                          elit, sed do eiusmod tempor incididunt ut labore et
                          dolore magna aliqua. Ut enim ad minim veniam, quis
                          nostrud exercitation.
                        </p>
                      </div>
                    </div>
                    <div class="product-commnets-list mb-25 pb-15">
                      <div class="pro-comments-img">
                        <img
                          src="/user-assets/img/product/comments/02.png"
                          alt=""
                        />
                      </div>
                      <div class="pro-commnets-text">
                        <h4>
                          Roger West -
                          <span>June 5, 2018</span>
                        </h4>
                        <div class="pro-rating">
                          <i class="far fa-star"></i>
                          <i class="far fa-star"></i>
                          <i class="far fa-star"></i>
                          <i class="far fa-star"></i>
                        </div>
                        <p>
                          Lorem ipsum dolor sit amet, consectetur adipisicing
                          elit, sed do eiusmod tempor incididunt ut labore et
                          dolore magna aliqua. Ut enim ad minim veniam, quis
                          nostrud exercitation.
                        </p>
                      </div>
                    </div>
                  </div>
                  <div class="review-box mt-50">
                    <h4>Add a Review</h4>
                    <div class="your-rating mb-40">
                      <span>Your Rating:</span>
                      <div class="rating-list">
                        <a href="#">
                          <i class="far fa-star"></i>
                        </a>
                        <a href="#">
                          <i class="far fa-star"></i>
                        </a>
                        <a href="#">
                          <i class="far fa-star"></i>
                        </a>
                        <a href="#">
                          <i class="far fa-star"></i>
                        </a>
                        <a href="#">
                          <i class="far fa-star"></i>
                        </a>
                      </div>
                    </div>
                    <form class="review-form" action="#">
                      <div class="row">
                        <div class="col-xl-12">
                          <label for="message">YOUR REVIEW</label>
                          <textarea
                            name="message"
                            id="message"
                            cols="30"
                            rows="10"
                          ></textarea>
                        </div>
                        <div class="col-xl-6">
                          <label for="r-name">Name</label>
                          <input type="text" id="r-name" />
                        </div>
                        <div class="col-xl-6">
                          <label for="r-email">Email</label>
                          <input type="email" id="r-email" />
                        </div>
                        <div class="col-xl-12">
                          <button class="btn theme-btn">Add your Review</button>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-xl-4 col-lg-4">
          <div class="pro-details-banner">
            <a href="shop.html"
              ><img src="/user-assets/img/banner/pro-details.jpg" alt=""
            /></a>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- shop-area end -->

  <!-- product-area start -->
  <section class="product-area pb-100">
    <div class="container">
      <div class="row">
        <div class="col-xl-12">
          <div class="area-title text-center mb-50">
            <h2>Releted Products</h2>
            <p>Browse the huge variety of our products</p>
          </div>
        </div>
      </div>
      <div class="product-slider-2 owl-carousel">
        <div class="pro-item">
          <div class="product-wrapper">
            <div class="product-img mb-25">
              <a href="product-details.html">
                <img src="/user-assets/img/product/pro5.jpg" alt="" />
                <img
                  class="secondary-img"
                  src="/user-assets/img/product/pro6.jpg"
                  alt=""
                />
              </a>
              <div class="product-action text-center">
                <a href="#" title="Shoppingb Cart">
                  <i class="flaticon-shopping-cart"></i>
                </a>
                <a href="#" title="Quick View">
                  <i class="flaticon-eye"></i>
                </a>
                <a
                  href="#"
                  data-toggle="tooltip"
                  data-placement="right"
                  title="Compare"
                >
                  <i class="flaticon-compare"></i>
                </a>
              </div>
              <div class="sale-tag">
                <span class="new">new</span>
                <span class="sale">sale</span>
              </div>
            </div>
            <div class="product-content">
              <div class="pro-cat mb-10">
                <a href="shop.html">decor, </a>
                <a href="shop.html">furniture</a>
              </div>
              <h4>
                <a href="product-details.html">Raglan Baseball Style shirt</a>
              </h4>
              <div class="product-meta">
                <div class="pro-price">
                  <span>$119.00 USD</span>
                  <span class="old-price">$230.00 USD</span>
                </div>
              </div>
              <div class="product-wishlist">
                <a href="#"><i class="far fa-heart" title="Wishlist"></i></a>
              </div>
            </div>
          </div>
        </div>
        <div class="pro-item">
          <div class="product-wrapper">
            <div class="product-img mb-25">
              <a href="product-details.html">
                <img src="/user-assets/img/product/pro7.jpg" alt="" />
                <img
                  class="secondary-img"
                  src="/user-assets/img/product/pro8.jpg"
                  alt=""
                />
              </a>
              <div class="product-action text-center">
                <a href="#" title="Shoppingb Cart">
                  <i class="flaticon-shopping-cart"></i>
                </a>
                <a href="#" title="Quick View">
                  <i class="flaticon-eye"></i>
                </a>
                <a
                  href="#"
                  data-toggle="tooltip"
                  data-placement="right"
                  title="Compare"
                >
                  <i class="flaticon-compare"></i>
                </a>
              </div>
            </div>
            <div class="product-content">
              <div class="pro-cat mb-10">
                <a href="shop.html">decor, </a>
                <a href="shop.html">furniture</a>
              </div>
              <h4>
                <a href="product-details.html">Raglan Baseball Style shirt</a>
              </h4>
              <div class="product-meta">
                <div class="pro-price">
                  <span>$119.00 USD</span>
                  <span class="old-price">$230.00 USD</span>
                </div>
              </div>
              <div class="product-wishlist">
                <a href="#"><i class="far fa-heart" title="Wishlist"></i></a>
              </div>
            </div>
          </div>
        </div>
        <div class="pro-item">
          <div class="product-wrapper">
            <div class="product-img mb-25">
              <a href="product-details.html">
                <img src="/user-assets/img/product/pro9.jpg" alt="" />
                <img
                  class="secondary-img"
                  src="/user-assets/img/product/pro10.jpg"
                  alt=""
                />
              </a>
              <div class="product-action text-center">
                <a href="#" title="Shoppingb Cart">
                  <i class="flaticon-shopping-cart"></i>
                </a>
                <a href="#" title="Quick View">
                  <i class="flaticon-eye"></i>
                </a>
                <a
                  href="#"
                  data-toggle="tooltip"
                  data-placement="right"
                  title="Compare"
                >
                  <i class="flaticon-compare"></i>
                </a>
              </div>
              <div class="sale-tag">
                <span class="new">new</span>
                <span class="sale">sale</span>
              </div>
            </div>
            <div class="product-content">
              <div class="pro-cat mb-10">
                <a href="shop.html">decor, </a>
                <a href="shop.html">furniture</a>
              </div>
              <h4>
                <a href="product-details.html">Raglan Baseball Style shirt</a>
              </h4>
              <div class="product-meta">
                <div class="pro-price">
                  <span>$119.00 USD</span>
                  <span class="old-price">$230.00 USD</span>
                </div>
              </div>
              <div class="product-wishlist">
                <a href="#"><i class="far fa-heart" title="Wishlist"></i></a>
              </div>
            </div>
          </div>
        </div>
        <div class="pro-item">
          <div class="product-wrapper">
            <div class="product-img mb-25">
              <a href="product-details.html">
                <img src="/user-assets/img/product/pro1.jpg" alt="" />
                <img
                  class="secondary-img"
                  src="/user-assets/img/product/pro11.jpg"
                  alt=""
                />
              </a>
              <div class="product-action text-center">
                <a href="#" title="Shoppingb Cart">
                  <i class="flaticon-shopping-cart"></i>
                </a>
                <a href="#" title="Quick View">
                  <i class="flaticon-eye"></i>
                </a>
                <a
                  href="#"
                  data-toggle="tooltip"
                  data-placement="right"
                  title="Compare"
                >
                  <i class="flaticon-compare"></i>
                </a>
              </div>
              <div class="sale-tag">
                <span class="new">new</span>
                <span class="sale">sale</span>
              </div>
            </div>
            <div class="product-content">
              <div class="pro-cat mb-10">
                <a href="shop.html">decor, </a>
                <a href="shop.html">furniture</a>
              </div>
              <h4>
                <a href="product-details.html">Raglan Baseball Style shirt</a>
              </h4>
              <div class="product-meta">
                <div class="pro-price">
                  <span>$119.00 USD</span>
                  <span class="old-price">$230.00 USD</span>
                </div>
              </div>
              <div class="product-wishlist">
                <a href="#"><i class="far fa-heart" title="Wishlist"></i></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- product-area end -->
</main>

<%- include("../partials/userFooter") %>
<script>

  function addToCart(prodId) {
    try {
      alert("hi");
      // Get the quantity from the plus-minus input
      var quantity = $("#quantityInput").val();
      console.log(`this is quantity ${quantity}`);
      // Get the selected size
      console.log(`this is size ${size}`);
      console.log(`this is prodId ${prodId}`);
      $.ajax({
        type: "POST",
        url: "/addToCart", // Adjust the URL if needed
        data: {
          size: size,
          quantity: quantity,
          prodId: prodId,
        },
        success: function (response) {
          if (response.status === "true") {
            alert("Product added to cart successfully");
          } else {
            alert("Failed to add product to cart");
          }
        },
        error: function (jqXHR, textStatus, errorThrown) {
          console.error("Error in addToCart AJAX request:", errorThrown);
          alert("Error occurred while adding product to cart");
        },
      });
    } catch (error) {
      console.error("Error in addToCart function:", error);
    }
  }
</script>

<script>
  // Get all buttons with the size-button class
  var buttons = document.querySelectorAll('.size-button');

  // Add event listener to each button
  buttons.forEach(function(button) {
    button.addEventListener('click', function() {
      // Remove 'clicked' class from all buttons
      buttons.forEach(function(btn) {
        btn.classList.remove('clicked');
      });
      // Add 'clicked' class to the clicked button
      button.classList.add('clicked');
    });
  });

  // Function to set size
var size = ''; // Variable to store the size value

function setSize(value) {
  size = value; // Update the size variable with the value passed to the function
  console.log('Selected size:', size); // Log the selected size (for demonstration)
}

</script>

<style>
  .size-button {
    border: 2px solid red;
    color: red;
    background-color: transparent;
    padding: 5px 10px;
    cursor: pointer;
  }

  .size-button.clicked {
    color: white;
    background-color: red;
  }

  .out-of-stock {
  color: red; /* Change text color for out of stock */
  font-weight: bold; /* Optionally, make it bold */
}

</style>
